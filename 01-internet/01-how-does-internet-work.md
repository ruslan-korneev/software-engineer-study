# Как работает Интернет

## Что такое Интернет?

Интернет — это глобальная сеть компьютеров, соединённых между собой. По сути, это "сеть сетей" — миллионы маленьких локальных сетей объединены в одну огромную.

## Основные компоненты

### 1. Клиенты и серверы
- **Клиент** — твой компьютер, телефон, браузер. Запрашивает данные.
- **Сервер** — компьютер, который хранит сайты/данные и отвечает на запросы.

### 2. IP-адреса
- Каждое устройство в сети имеет уникальный адрес (например: `192.168.1.1`)
- **IPv4**: 32 бита, ~4 млрд адресов (заканчиваются)
- **IPv6**: 128 бит, практически бесконечное количество (пример: `2001:0db8:85a3:0000:0000:8a2e:0370:7334`)

### 3. Маршрутизаторы (Routers)
- Направляют данные по сети
- Выбирают оптимальный путь от отправителя к получателю
- Используют таблицы маршрутизации

### 4. Пакеты данных
- Информация разбивается на маленькие "пакеты"
- Каждый пакет содержит: данные + заголовок (адрес отправителя, получателя, номер пакета)
- Пакеты могут идти разными маршрутами
- На месте назначения собираются в правильном порядке

## Как происходит передача данных?

```
Твой компьютер → Роутер → ISP → Магистральные каналы → ISP получателя → Сервер
```

**ISP (Internet Service Provider)** — провайдер интернета (Ростелеком, МТС, Билайн и т.д.)

## Основные протоколы

| Протокол | Назначение |
|----------|------------|
| **TCP/IP** | Основа интернета. TCP гарантирует доставку, IP — адресацию |
| **HTTP/HTTPS** | Передача веб-страниц |
| **FTP** | Передача файлов |
| **SMTP/POP3/IMAP** | Электронная почта |
| **DNS** | Преобразование доменов в IP-адреса |

## Модель TCP/IP (4 уровня)

1. **Канальный (Link)** — физическая передача (Ethernet, Wi-Fi)
2. **Сетевой (Internet)** — маршрутизация пакетов (IP)
3. **Транспортный (Transport)** — надёжная доставка (TCP, UDP)
4. **Прикладной (Application)** — протоколы приложений (HTTP, FTP, SMTP)

## Физический уровень

Данные передаются через:
- **Оптоволоконные кабели** — основа магистралей, включая подводные кабели между континентами
- **Медные провода** — DSL, Ethernet
- **Беспроводная связь** — Wi-Fi, мобильные сети (4G/5G), спутники

## Ключевые понятия

- **Bandwidth (пропускная способность)** — сколько данных можно передать за единицу времени
- **Latency (задержка)** — время от отправки запроса до получения ответа
- **Packet loss** — потеря пакетов при передаче

---

## Q&A

### Почему для почты нужен отдельный протокол SMTP?

**HTTP** создан для модели "запрос-ответ" — клиент запрашивает, сервер отвечает, соединение закрыто.

**SMTP** создан для **доставки сообщений между серверами** (push-модель):

| HTTP | SMTP |
|------|------|
| Клиент забирает данные | Отправитель **проталкивает** письмо |
| Синхронно (сразу ответ) | Асинхронно (письмо может ждать в очереди) |
| Получатель онлайн | Получатель может быть офлайн |

Почта работает по принципу store-and-forward (сохрани и передай дальше). SMTP умеет повторять отправку, если сервер недоступен. Также SMTP появился в 1982, а HTTP — только в 1991.

Получатель забирает письма через **POP3** или **IMAP** (pull-модель).

### Можно ли создать свой протокол?

Да! Протокол — это просто **набор правил** (договорённость о формате данных).

Простейший пример своего протокола для чата:
```
Формат: ТИП|ИМЯ|ТЕКСТ

MSG|Ruslan|Привет!
JOIN|Ruslan|
LEAVE|Ruslan|
```

Пишешь сервер и клиент на любом языке (Python, Go и т.д.), которые понимают этот формат — готово.

**Уровни сложности:**
- **Простой** — свой формат поверх TCP
- **Средний** — бинарный протокол с сжатием, шифрованием
- **Сложный** — свой транспортный протокол (вместо TCP)

**Почему обычно не делают:** уже есть HTTP, WebSocket, gRPC; сложно сделать безопасно; нужны свои клиенты.

**Когда имеет смысл:** игры (скорость), IoT (минимальный трафик), внутренние системы.
