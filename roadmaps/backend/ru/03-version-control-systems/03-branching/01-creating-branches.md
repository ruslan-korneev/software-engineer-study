# Creating Branches

[prev: 06-git-config](../02-git-basics/06-git-config.md) | [next: 02-renaming-branches](./02-renaming-branches.md)
---

## Что такое ветка в Git?

**Ветка (branch)** — это легковесный указатель на определённый коммит. По сути, ветка — это просто файл, содержащий 40-символьный SHA-1 хеш коммита, на который она указывает. Это делает создание веток в Git чрезвычайно быстрой и дешёвой операцией.

Ветки позволяют:
- Работать над новыми функциями изолированно от основного кода
- Экспериментировать без риска сломать рабочую версию
- Параллельно разрабатывать несколько функций
- Организовывать командную работу

## Основные команды создания веток

### Создание новой ветки

```bash
# Создать новую ветку (без переключения на неё)
git branch <имя-ветки>

# Пример: создать ветку feature-login
git branch feature-login
```

После выполнения этой команды создаётся новая ветка, но вы остаётесь на текущей ветке.

### Создание ветки и переключение на неё

```bash
# Создать ветку и сразу переключиться на неё
git checkout -b <имя-ветки>

# Современный способ (Git 2.23+)
git switch -c <имя-ветки>

# Пример
git checkout -b feature-auth
git switch -c feature-auth
```

### Создание ветки от определённого коммита

```bash
# Создать ветку от конкретного коммита
git branch <имя-ветки> <хеш-коммита>

# Пример
git branch hotfix-123 abc1234

# Создать и переключиться
git checkout -b hotfix-123 abc1234
```

### Создание ветки от другой ветки

```bash
# Создать ветку на основе другой ветки
git branch <новая-ветка> <базовая-ветка>

# Пример: создать feature-api от ветки develop
git branch feature-api develop

# Создать и переключиться
git checkout -b feature-api develop
```

### Создание ветки от тега

```bash
# Создать ветку от определённого тега
git branch <имя-ветки> <тег>

# Пример
git branch release-hotfix v1.2.0
```

## Просмотр веток

```bash
# Показать все локальные ветки
git branch

# Показать все ветки (локальные и удалённые)
git branch -a

# Показать только удалённые ветки
git branch -r

# Показать ветки с последним коммитом
git branch -v

# Показать ветки с информацией о tracking
git branch -vv
```

## Создание ветки для отслеживания удалённой ветки

```bash
# Создать локальную ветку, отслеживающую удалённую
git checkout --track origin/<имя-ветки>

# Или короче
git checkout <имя-ветки>  # если такая ветка есть только на remote

# Современный способ
git switch -c <локальная-ветка> --track origin/<удалённая-ветка>
```

## Best Practices

### Именование веток

Рекомендуется использовать понятные и структурированные имена:

```bash
# Хорошие примеры
feature/user-authentication
feature/JIRA-123-add-login
bugfix/fix-memory-leak
hotfix/security-patch
release/v2.0.0
docs/update-readme

# Плохие примеры
new-branch
test
my-branch
asdqwe
```

### Популярные конвенции именования

| Префикс | Назначение |
|---------|------------|
| `feature/` | Новая функциональность |
| `bugfix/` | Исправление бага |
| `hotfix/` | Срочное исправление в production |
| `release/` | Подготовка релиза |
| `docs/` | Изменения документации |
| `refactor/` | Рефакторинг кода |
| `test/` | Добавление тестов |

### Общие рекомендации

1. **Создавайте ветки часто** — ветки в Git дешёвые
2. **Одна ветка = одна задача** — не смешивайте несколько задач в одной ветке
3. **Используйте понятные имена** — название должно отражать суть изменений
4. **Создавайте ветки от актуального состояния** — перед созданием сделайте `git pull`

## Типичные ошибки

### 1. Создание ветки с пробелами в имени

```bash
# ОШИБКА: пробелы не допускаются
git branch my new branch

# ПРАВИЛЬНО: используйте дефисы или подчёркивания
git branch my-new-branch
git branch my_new_branch
```

### 2. Забыли переключиться на новую ветку

```bash
# Создали ветку, но остались на старой
git branch feature-x
# ... делаем коммиты в старую ветку!

# ПРАВИЛЬНО: используйте -b для автоматического переключения
git checkout -b feature-x
```

### 3. Создание ветки от устаревшего состояния

```bash
# ОШИБКА: создаём ветку без обновления
git branch feature-new

# ПРАВИЛЬНО: сначала обновить
git pull origin main
git branch feature-new
```

### 4. Использование запрещённых символов

```bash
# ОШИБКА: некоторые символы запрещены
git branch feature~new    # ~ запрещён
git branch feature^new    # ^ запрещён
git branch feature:new    # : запрещён

# ПРАВИЛЬНО
git branch feature-new
git branch feature/new
```

## Полезные команды

```bash
# Проверить, существует ли ветка
git branch --list <имя-ветки>

# Показать, какая ветка сейчас активна
git branch --show-current

# Создать ветку и настроить upstream
git checkout -b feature-x
git push -u origin feature-x
```

## Как Git хранит ветки

Ветки хранятся в директории `.git/refs/heads/`. Каждая ветка — это простой текстовый файл с хешем коммита:

```bash
# Посмотреть на что указывает ветка main
cat .git/refs/heads/main
# Выведет: abc123def456...

# Или через команду Git
git rev-parse main
```

Это объясняет, почему создание веток в Git такое быстрое — нужно просто создать маленький файл с хешем коммита.

---
[prev: 06-git-config](../02-git-basics/06-git-config.md) | [next: 02-renaming-branches](./02-renaming-branches.md)