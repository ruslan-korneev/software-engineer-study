# Git vs другие системы контроля версий

[prev: 02-why-use-version-control](./02-why-use-version-control.md) | [next: 04-installing-git](./04-installing-git.md)
---

## Обзор систем контроля версий

### Эволюция VCS

```
1972: SCCS (Source Code Control System) - первая VCS
1982: RCS (Revision Control System) - локальная система
1986: CVS (Concurrent Versions System) - первая централизованная
2000: Subversion (SVN) - улучшенная централизованная
2005: Git, Mercurial - распределённые системы
```

## Основные системы

### 1. Git

**Создатель:** Линус Торвальдс (2005)
**Тип:** Распределённая (DVCS)
**Статус:** Стандарт индустрии

```bash
# Типичный workflow
git clone https://github.com/user/repo.git
git checkout -b feature/new-feature
git add .
git commit -m "feat: добавлена новая функция"
git push origin feature/new-feature
```

### 2. Subversion (SVN)

**Создатель:** CollabNet (2000)
**Тип:** Централизованная (CVCS)
**Статус:** Используется в legacy-проектах

```bash
# Типичный workflow
svn checkout https://svn.example.com/repo/trunk
svn update
svn add newfile.txt
svn commit -m "Добавлен новый файл"
```

### 3. Mercurial (Hg)

**Создатель:** Matt Mackall (2005)
**Тип:** Распределённая (DVCS)
**Статус:** Нишевое использование

```bash
# Типичный workflow
hg clone https://example.com/repo
hg branch new-feature
hg commit -m "Добавлена функция"
hg push
```

### 4. Perforce (Helix Core)

**Тип:** Централизованная
**Статус:** Используется в геймдеве и крупных корпорациях

```bash
# Типичный workflow
p4 sync
p4 edit file.txt
p4 submit -d "Описание изменений"
```

## Сравнительная таблица

| Характеристика | Git | SVN | Mercurial | Perforce |
|----------------|-----|-----|-----------|----------|
| **Тип** | Распределённая | Централизованная | Распределённая | Централизованная |
| **Скорость** | Очень быстрая | Средняя | Быстрая | Быстрая |
| **Офлайн-работа** | Полная | Ограниченная | Полная | Ограниченная |
| **Ветвление** | Лёгкое, быстрое | Тяжёлое | Лёгкое | Среднее |
| **Кривая обучения** | Крутая | Пологая | Средняя | Средняя |
| **Большие файлы** | Плохо (Git LFS) | Хорошо | Средне | Отлично |
| **Популярность** | Доминирует | Снижается | Низкая | Нишевая |

## Почему Git победил?

### 1. Распределённая архитектура

**SVN (централизованная):**
```
      [Центральный сервер]
           ↑↓    ↑↓
    Клиент A   Клиент B
    (только    (только
    рабочая    рабочая
    копия)     копия)
```

**Git (распределённая):**
```
      [Удалённый репозиторий]
           ↑↓    ↑↓
    Клиент A   Клиент B
    (полная    (полная
    история)   история)
```

**Преимущества:**
- Работа офлайн
- Быстрые операции (всё локально)
- Каждая копия — полный бэкап

### 2. Эффективное ветвление

**SVN:** Ветка = копия всех файлов
```bash
svn copy trunk branches/feature  # Копирует файлы
# Медленно, занимает место
```

**Git:** Ветка = указатель на коммит
```bash
git branch feature  # Создаёт указатель
# Мгновенно, не занимает места
```

**Сравнение скорости создания ветки:**
- SVN: секунды-минуты (зависит от размера)
- Git: миллисекунды

### 3. Staging Area (Index)

Уникальная концепция Git — промежуточная область:

```bash
# Изменили 3 файла, но хотим закоммитить только 2
git add file1.py file2.py
git commit -m "Изменения в file1 и file2"
# file3.py остался не закоммиченным
```

В SVN — коммитишь либо всё, либо ничего.

### 4. Целостность данных

Git использует SHA-1 хеши для идентификации:

```bash
commit a1b2c3d4e5f6...  # SHA-1 хеш содержимого
```

**Гарантии:**
- Невозможно изменить историю незаметно
- Автоматическое обнаружение повреждений
- Уникальная идентификация каждого состояния

### 5. Экосистема и инструменты

**Платформы:**
- GitHub (крупнейший)
- GitLab (открытый исходный код)
- Bitbucket (интеграция с Atlassian)
- Azure DevOps

**Инструменты:**
- IDE интеграция (VS Code, IntelliJ, etc.)
- CI/CD системы
- Code review инструменты

## Детальное сравнение Git vs SVN

### Базовые операции

| Операция | Git | SVN |
|----------|-----|-----|
| Получить репозиторий | `git clone URL` | `svn checkout URL` |
| Обновить | `git pull` | `svn update` |
| Посмотреть статус | `git status` | `svn status` |
| Добавить файл | `git add file` | `svn add file` |
| Зафиксировать | `git commit` | `svn commit` |
| Посмотреть историю | `git log` | `svn log` |

### Работа с ветками

**Git:**
```bash
# Создание ветки
git branch feature

# Переключение
git checkout feature
# или
git switch feature

# Создание + переключение
git checkout -b feature

# Слияние
git checkout main
git merge feature

# Удаление
git branch -d feature
```

**SVN:**
```bash
# Создание ветки (копирование)
svn copy trunk branches/feature -m "Создана ветка feature"

# Переключение
svn switch ^/branches/feature

# Слияние
svn merge ^/branches/feature

# Удаление
svn delete ^/branches/feature -m "Удалена ветка feature"
```

### Работа офлайн

**Git:**
```bash
# Все операции работают офлайн:
git commit    # ✓
git branch    # ✓
git merge     # ✓
git log       # ✓
git diff      # ✓
git blame     # ✓

# Только push/pull требуют сеть
```

**SVN:**
```bash
# Офлайн можно только:
svn status    # ✓ (локальные изменения)
svn diff      # ✓ (сравнение с BASE)

# Требуют сервер:
svn commit    # ✗
svn log       # ✗
svn update    # ✗
svn blame     # ✗
```

## Git vs Mercurial

Mercurial создавался одновременно с Git для тех же целей.

### Различия

| Аспект | Git | Mercurial |
|--------|-----|-----------|
| Философия | Мощность и гибкость | Простота и безопасность |
| Команды | Много опций | Минимум опций |
| История | Можно изменять | Неизменяемая |
| Кривая обучения | Крутая | Пологая |

### Почему Git популярнее?

1. **GitHub** — платформа выбрала Git
2. **Linux** — развивается на Git
3. **Гибкость** — больше возможностей для продвинутых пользователей
4. **Сообщество** — больше ресурсов и инструментов

## Когда использовать НЕ Git?

### Perforce для геймдева
- Огромные бинарные файлы (текстуры, модели)
- Git плохо справляется с бинарниками
- File locking (блокировка файлов)

### SVN для legacy
- Старые проекты уже на SVN
- Стоимость миграции высокая
- Команда не готова к обучению

### Централизованные системы для контроля
- Строгий контроль доступа
- Аудит изменений
- Регулируемые отрасли (банки, медицина)

## Миграция на Git

### С SVN на Git

```bash
# Клонирование SVN репозитория в Git
git svn clone https://svn.example.com/repo \
    --stdlayout \
    --authors-file=authors.txt

# authors.txt формат:
# svn_username = Git Name <email@example.com>
```

### С Mercurial на Git

```bash
# Используя hg-fast-export
git init new-repo
cd new-repo
hg-fast-export.sh -r /path/to/hg-repo
```

## Best Practices при выборе VCS

### Выбирайте Git, если:
- Новый проект
- Распределённая команда
- Нужно активное ветвление
- Открытый исходный код

### Рассмотрите альтернативы, если:
- Очень большие бинарные файлы
- Строгий централизованный контроль
- Legacy-инфраструктура на другой VCS

## Типичные ошибки при переходе на Git

1. **Думать как в SVN** — Git ветки работают иначе
2. **Бояться ветвления** — в Git это дёшево
3. **Коммитить напрямую в main** — используйте feature branches
4. **Игнорировать staging area** — это мощная функция

## Резюме

### Почему Git — стандарт:

1. **Распределённость** — каждый имеет полную копию
2. **Скорость** — операции выполняются локально
3. **Ветвление** — лёгкое и эффективное
4. **Экосистема** — GitHub, GitLab, тысячи инструментов
5. **Сообщество** — миллионы разработчиков

### Когда НЕ Git:

1. **Геймдев** — Perforce для больших бинарников
2. **Legacy** — миграция может быть дорогой
3. **Строгий контроль** — централизованные системы

**Рекомендация:** Для 95% проектов Git — лучший выбор. Изучайте Git как основной инструмент.

---
[prev: 02-why-use-version-control](./02-why-use-version-control.md) | [next: 04-installing-git](./04-installing-git.md)