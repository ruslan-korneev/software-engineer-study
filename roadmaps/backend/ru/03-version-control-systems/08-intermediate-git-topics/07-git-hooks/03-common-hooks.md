# Common Hooks - –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–µ —Ö—É–∫–∏

## –û–±–∑–æ—Ä –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Ö—É–∫–æ–≤

–í —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö —á–∞—â–µ –≤—Å–µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç—Ä–∏ —Ö—É–∫–∞:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Most Used Git Hooks                          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                  ‚îÇ
‚îÇ   pre-commit ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞ (lint, format, secrets)     ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îÇ   commit-msg ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ –§–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏—è (conventional commits)   ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îÇ   pre-push ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ –¢–µ—Å—Ç—ã –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π                     ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## pre-commit: –õ–∏–Ω—Ç–∏–Ω–≥, —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —Ç–µ—Å—Ç—ã

### –ë–∞–∑–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä

```bash
#!/bin/bash
# .git/hooks/pre-commit

set -e  # –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –æ—à–∏–±–∫–µ

echo "üîç Running pre-commit checks..."

# –ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ staged —Ñ–∞–π–ª–æ–≤
STAGED_FILES=$(git diff --cached --name-only --diff-filter=ACMR)

if [ -z "$STAGED_FILES" ]; then
    echo "No staged files to check"
    exit 0
fi

echo "Checking files: $STAGED_FILES"
```

### –õ–∏–Ω—Ç–∏–Ω–≥ JavaScript/TypeScript

```bash
#!/bin/bash
# .git/hooks/pre-commit - ESLint

# –ü–æ–ª—É—á–∞–µ–º —Ç–æ–ª—å–∫–æ JS/TS —Ñ–∞–π–ª—ã
JS_FILES=$(git diff --cached --name-only --diff-filter=ACMR | grep -E '\.(js|jsx|ts|tsx)$' || true)

if [ -n "$JS_FILES" ]; then
    echo "Running ESLint..."

    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–æ–ª—å–∫–æ staged —Ñ–∞–π–ª—ã
    npx eslint $JS_FILES --max-warnings=0

    if [ $? -ne 0 ]; then
        echo ""
        echo "‚ùå ESLint found errors. Please fix them before committing."
        echo "   Run 'npm run lint:fix' to auto-fix some issues."
        exit 1
    fi

    echo "‚úÖ ESLint passed"
fi
```

### –õ–∏–Ω—Ç–∏–Ω–≥ Python

```bash
#!/bin/bash
# .git/hooks/pre-commit - Python linting

PYTHON_FILES=$(git diff --cached --name-only --diff-filter=ACMR | grep '\.py$' || true)

if [ -n "$PYTHON_FILES" ]; then
    echo "Running Python checks..."

    # Flake8 - —Å—Ç–∏–ª—å –∫–æ–¥–∞
    echo "  - flake8..."
    flake8 $PYTHON_FILES

    # MyPy - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤
    echo "  - mypy..."
    mypy $PYTHON_FILES --ignore-missing-imports

    # Black - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
    echo "  - black (check)..."
    black --check $PYTHON_FILES

    if [ $? -ne 0 ]; then
        echo "‚ùå Python checks failed"
        exit 1
    fi

    echo "‚úÖ Python checks passed"
fi
```

### –ê–≤—Ç–æ—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
#!/bin/bash
# .git/hooks/pre-commit - Auto-format and re-stage

# JavaScript/TypeScript —Å Prettier
JS_FILES=$(git diff --cached --name-only --diff-filter=ACMR | grep -E '\.(js|jsx|ts|tsx|json|css|md)$' || true)

if [ -n "$JS_FILES" ]; then
    echo "Formatting files with Prettier..."

    # –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Ñ–∞–π–ª—ã
    npx prettier --write $JS_FILES

    # –î–æ–±–∞–≤–ª—è–µ–º –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –æ–±—Ä–∞—Ç–Ω–æ –≤ staging
    git add $JS_FILES

    echo "‚úÖ Files formatted and re-staged"
fi

# Python —Å Black
PYTHON_FILES=$(git diff --cached --name-only --diff-filter=ACMR | grep '\.py$' || true)

if [ -n "$PYTHON_FILES" ]; then
    echo "Formatting Python files with Black..."

    black $PYTHON_FILES

    # isort –¥–ª—è –∏–º–ø–æ—Ä—Ç–æ–≤
    isort $PYTHON_FILES

    git add $PYTHON_FILES

    echo "‚úÖ Python files formatted"
fi
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–µ–∫—Ä–µ—Ç—ã

```bash
#!/bin/bash
# .git/hooks/pre-commit - Secret detection

echo "Checking for secrets..."

STAGED_CONTENT=$(git diff --cached)

# –ü–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è –ø–æ–∏—Å–∫–∞ —Å–µ–∫—Ä–µ—Ç–æ–≤
patterns=(
    'password\s*=\s*["\047][^"\047]+'
    'secret\s*=\s*["\047][^"\047]+'
    'api[_-]?key\s*=\s*["\047][^"\047]+'
    'AWS[_A-Z]*\s*=\s*["\047][^"\047]+'
    'PRIVATE[_-]?KEY'
    '-----BEGIN (RSA|DSA|EC|OPENSSH) PRIVATE KEY-----'
    'ghp_[a-zA-Z0-9]{36}'          # GitHub token
    'sk-[a-zA-Z0-9]{48}'           # OpenAI API key
    'AIza[0-9A-Za-z\\-_]{35}'      # Google API key
)

for pattern in "${patterns[@]}"; do
    if echo "$STAGED_CONTENT" | grep -qiE "$pattern"; then
        echo "‚ùå Potential secret detected!"
        echo "   Pattern: $pattern"
        echo ""
        echo "   If this is not a secret, you can:"
        echo "   1. Add it to .gitignore"
        echo "   2. Use environment variables"
        echo "   3. Skip with: git commit --no-verify (not recommended)"
        exit 1
    fi
done

echo "‚úÖ No secrets detected"
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ TODO/FIXME

```bash
#!/bin/bash
# .git/hooks/pre-commit - Block TODO comments

STAGED_FILES=$(git diff --cached --name-only --diff-filter=ACMR)

# –ò—â–µ–º TODO/FIXME –≤ staged –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
if git diff --cached | grep -E '^\+.*\b(TODO|FIXME|XXX|HACK)\b'; then
    echo ""
    echo "‚ö†Ô∏è  Warning: Found TODO/FIXME comments in staged changes"
    echo ""
    read -p "Do you want to commit anyway? (y/n) " -n 1 -r
    echo
    if [[ ! $REPLY =~ ^[Yy]$ ]]; then
        exit 1
    fi
fi
```

## commit-msg: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏—è

### Conventional Commits

```bash
#!/bin/bash
# .git/hooks/commit-msg - Conventional Commits validation

COMMIT_MSG_FILE=$1
COMMIT_MSG=$(cat "$COMMIT_MSG_FILE")

# Conventional Commits pattern
# type(scope)!: description
PATTERN='^(feat|fix|docs|style|refactor|perf|test|build|ci|chore|revert)(\([a-z0-9-]+\))?(!)?: .{1,}'

# –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º merge –∫–æ–º–º–∏—Ç—ã
if echo "$COMMIT_MSG" | grep -qE '^Merge'; then
    exit 0
fi

# –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º revert –∫–æ–º–º–∏—Ç—ã
if echo "$COMMIT_MSG" | grep -qE '^Revert'; then
    exit 0
fi

if ! echo "$COMMIT_MSG" | grep -qE "$PATTERN"; then
    echo "‚ùå Invalid commit message format!"
    echo ""
    echo "Expected: type(scope): description"
    echo ""
    echo "Types:"
    echo "  feat     - New feature"
    echo "  fix      - Bug fix"
    echo "  docs     - Documentation changes"
    echo "  style    - Code style (formatting, semicolons, etc.)"
    echo "  refactor - Code refactoring"
    echo "  perf     - Performance improvements"
    echo "  test     - Adding or fixing tests"
    echo "  build    - Build system or dependencies"
    echo "  ci       - CI/CD configuration"
    echo "  chore    - Other changes (configs, scripts)"
    echo "  revert   - Revert previous commit"
    echo ""
    echo "Examples:"
    echo "  feat(auth): add OAuth2 login"
    echo "  fix: resolve null pointer exception"
    echo "  docs(readme): update installation guide"
    echo "  feat!: breaking API change"
    echo ""
    echo "Your message: $COMMIT_MSG"
    exit 1
fi

echo "‚úÖ Commit message is valid"
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª–∏–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏—è

```bash
#!/bin/bash
# .git/hooks/commit-msg - Length validation

COMMIT_MSG_FILE=$1
COMMIT_MSG=$(cat "$COMMIT_MSG_FILE")

# –ü–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞ (subject)
SUBJECT=$(echo "$COMMIT_MSG" | head -1)

# –î–ª–∏–Ω–∞ subject
SUBJECT_LENGTH=${#SUBJECT}
MAX_SUBJECT_LENGTH=72
MIN_SUBJECT_LENGTH=10

if [ $SUBJECT_LENGTH -gt $MAX_SUBJECT_LENGTH ]; then
    echo "‚ùå Subject line is too long!"
    echo "   Current: $SUBJECT_LENGTH characters"
    echo "   Maximum: $MAX_SUBJECT_LENGTH characters"
    exit 1
fi

if [ $SUBJECT_LENGTH -lt $MIN_SUBJECT_LENGTH ]; then
    echo "‚ùå Subject line is too short!"
    echo "   Current: $SUBJECT_LENGTH characters"
    echo "   Minimum: $MIN_SUBJECT_LENGTH characters"
    exit 1
fi

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—É—Å—Ç–æ–π –≤—Ç–æ—Ä–æ–π —Å—Ç—Ä–æ–∫–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å body)
LINE_COUNT=$(echo "$COMMIT_MSG" | wc -l)
if [ $LINE_COUNT -gt 1 ]; then
    SECOND_LINE=$(echo "$COMMIT_MSG" | sed -n '2p')
    if [ -n "$SECOND_LINE" ]; then
        echo "‚ùå Second line must be empty (separates subject from body)"
        exit 1
    fi
fi
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–º–µ—Ä–∞ –∑–∞–¥–∞—á–∏

```bash
#!/bin/bash
# .git/hooks/commit-msg - Add ticket number from branch

COMMIT_MSG_FILE=$1
COMMIT_MSG=$(cat "$COMMIT_MSG_FILE")

# –ü–æ–ª—É—á–∞–µ–º –∏–º—è –≤–µ—Ç–∫–∏
BRANCH=$(git symbolic-ref --short HEAD 2>/dev/null)

# –ò–∑–≤–ª–µ–∫–∞–µ–º –Ω–æ–º–µ—Ä –∑–∞–¥–∞—á–∏ (JIRA-123, PROJ-456, etc.)
TICKET=$(echo "$BRANCH" | grep -oE '[A-Z]+-[0-9]+' | head -1)

if [ -n "$TICKET" ]; then
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É–∂–µ –Ω–æ–º–µ—Ä –∑–∞–¥–∞—á–∏ –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏
    if ! echo "$COMMIT_MSG" | grep -q "$TICKET"; then
        # –î–æ–±–∞–≤–ª—è–µ–º –≤ –∫–æ–Ω–µ—Ü —Å–æ–æ–±—â–µ–Ω–∏—è
        echo "" >> "$COMMIT_MSG_FILE"
        echo "Refs: $TICKET" >> "$COMMIT_MSG_FILE"
        echo "‚úÖ Added ticket reference: $TICKET"
    fi
fi
```

## pre-push: –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –ø–µ—Ä–µ–¥ –ø—É—à–µ–º

### –ë–∞–∑–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä

```bash
#!/bin/bash
# .git/hooks/pre-push

REMOTE=$1
URL=$2

echo "üß™ Running pre-push checks..."

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
echo "Running tests..."
npm test

if [ $? -ne 0 ]; then
    echo ""
    echo "‚ùå Tests failed! Push aborted."
    echo "   Fix the tests before pushing."
    exit 1
fi

echo "‚úÖ All tests passed"
```

### –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

```bash
#!/bin/bash
# .git/hooks/pre-push - Comprehensive checks

REMOTE=$1
URL=$2

echo "üöÄ Running pre-push checks..."
echo ""

# 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ (TypeScript)
echo "1Ô∏è‚É£ Type checking..."
npx tsc --noEmit
if [ $? -ne 0 ]; then
    echo "‚ùå Type errors found!"
    exit 1
fi
echo "‚úÖ Types OK"
echo ""

# 2. –õ–∏–Ω—Ç–∏–Ω–≥
echo "2Ô∏è‚É£ Linting..."
npm run lint
if [ $? -ne 0 ]; then
    echo "‚ùå Lint errors found!"
    exit 1
fi
echo "‚úÖ Lint OK"
echo ""

# 3. Unit —Ç–µ—Å—Ç—ã
echo "3Ô∏è‚É£ Running unit tests..."
npm run test:unit
if [ $? -ne 0 ]; then
    echo "‚ùå Unit tests failed!"
    exit 1
fi
echo "‚úÖ Unit tests OK"
echo ""

# 4. –°–±–æ—Ä–∫–∞
echo "4Ô∏è‚É£ Building..."
npm run build
if [ $? -ne 0 ]; then
    echo "‚ùå Build failed!"
    exit 1
fi
echo "‚úÖ Build OK"
echo ""

echo "‚úÖ All pre-push checks passed!"
exit 0
```

### –ó–∞—â–∏—Ç–∞ –≤–µ—Ç–æ–∫

```bash
#!/bin/bash
# .git/hooks/pre-push - Branch protection

REMOTE=$1
URL=$2

# –ß–∏—Ç–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ push
while read local_ref local_sha remote_ref remote_sha; do
    # –ò–∑–≤–ª–µ–∫–∞–µ–º –∏–º—è –≤–µ—Ç–∫–∏
    remote_branch=$(echo "$remote_ref" | sed 's|refs/heads/||')

    # –ó–∞—â–∏—â—ë–Ω–Ω—ã–µ –≤–µ—Ç–∫–∏
    protected="main master develop production"

    for branch in $protected; do
        if [ "$remote_branch" = "$branch" ]; then
            echo "‚ö†Ô∏è  Warning: Pushing to protected branch '$branch'"
            echo ""

            # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ CI –¥–ª—è —ç—Ç–æ–π –≤–µ—Ç–∫–∏
            if [ "$branch" = "main" ] || [ "$branch" = "master" ]; then
                echo "Running full test suite before push to $branch..."
                npm run test:all
                if [ $? -ne 0 ]; then
                    echo "‚ùå Tests failed! Push to $branch aborted."
                    exit 1
                fi
            fi

            # –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
            read -p "Are you sure you want to push to $branch? (yes/no) " confirm
            if [ "$confirm" != "yes" ]; then
                echo "Push cancelled."
                exit 1
            fi
        fi
    done
done

exit 0
```

## –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ö—É–∫–∞–º–∏

### Husky (Node.js)

–°–∞–º—ã–π –ø–æ–ø—É–ª—è—Ä–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è JavaScript/TypeScript –ø—Ä–æ–µ–∫—Ç–æ–≤.

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞
npm install husky --save-dev

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
npx husky init

# –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ—Å–ª–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:
# .husky/
#   _/
#     husky.sh
#   pre-commit

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ö—É–∫–∞
echo "npm test" > .husky/pre-commit
```

**package.json –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**

```json
{
  "scripts": {
    "prepare": "husky",
    "lint": "eslint .",
    "test": "jest"
  }
}
```

**–ü—Ä–∏–º–µ—Ä .husky/pre-commit:**

```bash
#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

npm run lint
npx lint-staged
```

**lint-staged –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**

```json
{
  "lint-staged": {
    "*.{js,jsx,ts,tsx}": [
      "eslint --fix",
      "prettier --write"
    ],
    "*.{json,md,css}": [
      "prettier --write"
    ]
  }
}
```

### pre-commit (Python)

–ü–æ–ø—É–ª—è—Ä–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è Python –ø—Ä–æ–µ–∫—Ç–æ–≤ (–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º–∏ —è–∑—ã–∫–∞–º–∏).

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞
pip install pre-commit

# –ò–ª–∏ —á–µ—Ä–µ–∑ brew
brew install pre-commit
```

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è .pre-commit-config.yaml:**

```yaml
# .pre-commit-config.yaml
repos:
  # Python formatting
  - repo: https://github.com/psf/black
    rev: 23.12.1
    hooks:
      - id: black

  # Python imports sorting
  - repo: https://github.com/pycqa/isort
    rev: 5.13.2
    hooks:
      - id: isort

  # Python linting
  - repo: https://github.com/pycqa/flake8
    rev: 7.0.0
    hooks:
      - id: flake8

  # Python type checking
  - repo: https://github.com/pre-commit/mirrors-mypy
    rev: v1.8.0
    hooks:
      - id: mypy

  # General hooks
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v4.5.0
    hooks:
      - id: trailing-whitespace
      - id: end-of-file-fixer
      - id: check-yaml
      - id: check-json
      - id: check-added-large-files
        args: ['--maxkb=1000']
      - id: detect-private-key

  # Commit message
  - repo: https://github.com/commitizen-tools/commitizen
    rev: v3.13.0
    hooks:
      - id: commitizen
        stages: [commit-msg]
```

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ö—É–∫–æ–≤
pre-commit install
pre-commit install --hook-type commit-msg

# –ó–∞–ø—É—Å–∫ –Ω–∞ –≤—Å–µ—Ö —Ñ–∞–π–ª–∞—Ö
pre-commit run --all-files

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–π —Ö—É–∫–æ–≤
pre-commit autoupdate
```

### Lefthook (Go)

–ë—ã—Å—Ç—Ä—ã–π –∏ –≥–∏–±–∫–∏–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π –Ω–∞ Go.

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞
brew install lefthook

# –ò–ª–∏ —á–µ—Ä–µ–∑ npm
npm install lefthook --save-dev

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
lefthook install
```

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è lefthook.yml:**

```yaml
# lefthook.yml
pre-commit:
  parallel: true
  commands:
    lint:
      glob: "*.{js,ts,jsx,tsx}"
      run: npx eslint {staged_files}

    prettier:
      glob: "*.{js,ts,jsx,tsx,json,md,css}"
      run: npx prettier --check {staged_files}

    python-lint:
      glob: "*.py"
      run: flake8 {staged_files}

    secrets:
      run: git diff --cached | grep -E "(password|secret|api_key)" && exit 1 || exit 0

commit-msg:
  commands:
    conventional:
      run: |
        commit_regex='^(feat|fix|docs|style|refactor|test|chore)(\(.+\))?: .+'
        if ! grep -qE "$commit_regex" {1}; then
          echo "Invalid commit message format"
          exit 1
        fi

pre-push:
  commands:
    test:
      run: npm test

    build:
      run: npm run build
```

```bash
# –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã lefthook
lefthook run pre-commit    # –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é
lefthook install           # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ö—É–∫–∏
lefthook uninstall         # –£–¥–∞–ª–∏—Ç—å —Ö—É–∫–∏
```

## –ü—Ä–∏–º–µ—Ä—ã —Å–∫—Ä–∏–ø—Ç–æ–≤

### –ü–æ–ª–Ω—ã–π pre-commit —Å–∫—Ä–∏–ø—Ç

```bash
#!/bin/bash
# .git/hooks/pre-commit - Production-ready hook

set -e

# –¶–≤–µ—Ç–∞ –¥–ª—è –≤—ã–≤–æ–¥–∞
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
NC='\033[0m' # No Color

echo -e "${YELLOW}Running pre-commit checks...${NC}"
echo ""

# –ü–æ–ª—É—á–∞–µ–º staged —Ñ–∞–π–ª—ã
STAGED=$(git diff --cached --name-only --diff-filter=ACMR)

if [ -z "$STAGED" ]; then
    echo "No staged files"
    exit 0
fi

# 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã
echo "Checking for merge conflict markers..."
if git diff --cached | grep -E '^[+].*(<<<<<<<|=======|>>>>>>>)'; then
    echo -e "${RED}ERROR: Merge conflict markers found!${NC}"
    exit 1
fi
echo -e "${GREEN}OK${NC}"

# 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –æ—Ç–ª–∞–¥–æ—á–Ω—ã–π –∫–æ–¥
echo "Checking for debug statements..."
JS_DEBUG=$(echo "$STAGED" | xargs grep -l -E '\b(debugger|console\.(log|debug|info))\b' 2>/dev/null || true)
PY_DEBUG=$(echo "$STAGED" | xargs grep -l -E '\b(breakpoint\(\)|pdb\.set_trace\(\)|print\()' 2>/dev/null || true)

if [ -n "$JS_DEBUG" ] || [ -n "$PY_DEBUG" ]; then
    echo -e "${YELLOW}WARNING: Debug statements found in:${NC}"
    [ -n "$JS_DEBUG" ] && echo "$JS_DEBUG"
    [ -n "$PY_DEBUG" ] && echo "$PY_DEBUG"
    read -p "Continue anyway? (y/n) " -n 1 -r
    echo
    [[ ! $REPLY =~ ^[Yy]$ ]] && exit 1
fi
echo -e "${GREEN}OK${NC}"

# 3. JavaScript/TypeScript checks
JS_FILES=$(echo "$STAGED" | grep -E '\.(js|jsx|ts|tsx)$' || true)
if [ -n "$JS_FILES" ]; then
    echo "Running ESLint..."
    npx eslint $JS_FILES --max-warnings=0 || exit 1
    echo -e "${GREEN}OK${NC}"

    echo "Running Prettier..."
    npx prettier --check $JS_FILES || {
        echo -e "${YELLOW}Running Prettier fix...${NC}"
        npx prettier --write $JS_FILES
        git add $JS_FILES
    }
    echo -e "${GREEN}OK${NC}"
fi

# 4. Python checks
PY_FILES=$(echo "$STAGED" | grep '\.py$' || true)
if [ -n "$PY_FILES" ]; then
    echo "Running Black..."
    black --check $PY_FILES || {
        black $PY_FILES
        git add $PY_FILES
    }
    echo -e "${GREEN}OK${NC}"

    echo "Running Flake8..."
    flake8 $PY_FILES || exit 1
    echo -e "${GREEN}OK${NC}"
fi

# 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–æ–≤
echo "Checking file sizes..."
MAX_SIZE=1048576  # 1MB
for file in $STAGED; do
    if [ -f "$file" ]; then
        size=$(wc -c < "$file")
        if [ $size -gt $MAX_SIZE ]; then
            echo -e "${RED}ERROR: $file is too large ($(($size/1024))KB > 1MB)${NC}"
            exit 1
        fi
    fi
done
echo -e "${GREEN}OK${NC}"

echo ""
echo -e "${GREEN}All pre-commit checks passed!${NC}"
exit 0
```

### –ü–æ–ª–Ω—ã–π commit-msg —Å–∫—Ä–∏–ø—Ç

```bash
#!/bin/bash
# .git/hooks/commit-msg - Complete message validation

COMMIT_MSG_FILE=$1
COMMIT_MSG=$(cat "$COMMIT_MSG_FILE")

# –¶–≤–µ—Ç–∞
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
NC='\033[0m'

# –ü—Ä–æ–ø—É—Å–∫–∞–µ–º merge –∏ revert –∫–æ–º–º–∏—Ç—ã
if echo "$COMMIT_MSG" | head -1 | grep -qE '^(Merge|Revert)'; then
    exit 0
fi

echo -e "${YELLOW}Validating commit message...${NC}"

# 1. Conventional Commits format
PATTERN='^(feat|fix|docs|style|refactor|perf|test|build|ci|chore|revert)(\([a-z0-9/_-]+\))?(!)?: .{3,}'

if ! echo "$COMMIT_MSG" | head -1 | grep -qE "$PATTERN"; then
    echo -e "${RED}ERROR: Invalid commit message format!${NC}"
    echo ""
    echo "Format: type(scope): description"
    echo ""
    echo "Types: feat, fix, docs, style, refactor, perf, test, build, ci, chore, revert"
    echo ""
    echo -e "Your message: ${YELLOW}$(echo "$COMMIT_MSG" | head -1)${NC}"
    exit 1
fi

# 2. Subject length (max 72)
SUBJECT=$(echo "$COMMIT_MSG" | head -1)
if [ ${#SUBJECT} -gt 72 ]; then
    echo -e "${RED}ERROR: Subject too long (${#SUBJECT} > 72 chars)${NC}"
    exit 1
fi

# 3. No period at end of subject
if echo "$SUBJECT" | grep -qE '\.$'; then
    echo -e "${RED}ERROR: Subject should not end with a period${NC}"
    exit 1
fi

# 4. Capitalize first letter after type
if ! echo "$SUBJECT" | grep -qE '^[a-z]+(\([a-z0-9/_-]+\))?(!)?: [A-Z]'; then
    echo -e "${YELLOW}WARNING: Description should start with capital letter${NC}"
fi

# 5. Body formatting (if present)
LINE_COUNT=$(echo "$COMMIT_MSG" | wc -l)
if [ $LINE_COUNT -gt 1 ]; then
    SECOND_LINE=$(echo "$COMMIT_MSG" | sed -n '2p')
    if [ -n "$SECOND_LINE" ]; then
        echo -e "${RED}ERROR: Second line must be blank${NC}"
        exit 1
    fi

    # Check body line length (max 100)
    while IFS= read -r line; do
        if [ ${#line} -gt 100 ]; then
            echo -e "${YELLOW}WARNING: Line too long (${#line} > 100 chars)${NC}"
        fi
    done < <(echo "$COMMIT_MSG" | tail -n +3)
fi

echo -e "${GREEN}Commit message is valid!${NC}"
exit 0
```

## Best Practices

### 1. –î–µ–ª–∞–π—Ç–µ —Ö—É–∫–∏ –±—ã—Å—Ç—Ä—ã–º–∏

```bash
# –ü–ª–æ—Ö–æ - –ø—Ä–æ–≤–µ—Ä—è–µ–º –≤—Å–µ —Ñ–∞–π–ª—ã
npm run lint  # 30 —Å–µ–∫—É–Ω–¥

# –•–æ—Ä–æ—à–æ - —Ç–æ–ª—å–∫–æ staged —Ñ–∞–π–ª—ã
npx eslint $(git diff --cached --name-only | grep '\.js$')  # 2 —Å–µ–∫—É–Ω–¥—ã
```

### 2. –í—ã–≤–æ–¥–∏—Ç–µ –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

```bash
echo "‚ùå Lint errors found!"
echo ""
echo "Affected files:"
echo "$FAILED_FILES"
echo ""
echo "To fix automatically, run:"
echo "  npm run lint:fix"
```

### 3. –ü–æ–∑–≤–æ–ª—è–π—Ç–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –≤ —ç–∫—Å—Ç—Ä–µ–Ω–Ω—ã—Ö —Å–ª—É—á–∞—è—Ö

```bash
# –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–ø—É—Å–∫–∞
echo "To skip this check (emergency only):"
echo "  git commit --no-verify"
```

### 4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –≤–º–µ—Å—Ç–æ —Å–∞–º–æ–ø–∏—Å–Ω—ã—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤

```bash
# –í–º–µ—Å—Ç–æ —Å–∞–º–æ–ø–∏—Å–Ω–æ–≥–æ —Ö—É–∫–∞
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ husky + lint-staged –¥–ª—è JS
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ pre-commit –¥–ª—è Python
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ lefthook –¥–ª—è –º—É–ª—å—Ç–∏—è–∑—ã—á–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤
```

### 5. –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Ö—É–∫–∏ –ª–æ–∫–∞–ª—å–Ω–æ

```bash
# –ó–∞–ø—É—Å–∫ pre-commit –≤—Ä—É—á–Ω—É—é
.git/hooks/pre-commit

# –ó–∞–ø—É—Å–∫ commit-msg —Å —Ç–µ—Å—Ç–æ–≤—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º
echo "test: example message" > /tmp/test-msg
.git/hooks/commit-msg /tmp/test-msg
```
