# Что такое регулярные выражения

## Введение

**Регулярные выражения** (regular expressions, regex, regexp) - это язык описания шаблонов для поиска и обработки текста. Они позволяют:

- Искать текст по сложным шаблонам
- Проверять соответствие строки формату
- Извлекать части текста
- Заменять текст

## История

- 1956 - математик Стивен Клини описал "регулярные множества"
- 1968 - Ken Thompson реализовал регулярные выражения в текстовом редакторе ed
- 1986 - POSIX стандартизировал два типа regex: BRE и ERE
- 1997 - Perl 5 представил расширенные возможности (PCRE)

## Типы регулярных выражений

### BRE - Basic Regular Expressions

Базовые регулярные выражения. Используются по умолчанию в `grep`, `sed`.

```bash
# В BRE метасимволы нужно экранировать
grep 'ab\+' file.txt    # + нужно экранировать
grep 'ab\(cd\)' file.txt  # скобки нужно экранировать
```

### ERE - Extended Regular Expressions

Расширенные регулярные выражения. Используются с `grep -E` (или `egrep`), `awk`.

```bash
# В ERE метасимволы работают без экранирования
grep -E 'ab+' file.txt     # + работает напрямую
grep -E 'ab(cd)' file.txt  # скобки работают напрямую
```

### PCRE - Perl Compatible Regular Expressions

Регулярные выражения Perl. Самый мощный синтаксис. Используются с `grep -P`, в Python, JavaScript, и многих языках.

```bash
# PCRE поддерживает дополнительные возможности
grep -P '\d+' file.txt      # \d для цифр
grep -P '(?<=@)\w+' file.txt  # lookbehind
```

### Сравнение

| Функция | BRE | ERE | PCRE |
|---------|-----|-----|------|
| `+` (один или более) | `\+` | `+` | `+` |
| `?` (ноль или один) | `\?` | `?` | `?` |
| `{n,m}` (количество) | `\{n,m\}` | `{n,m}` | `{n,m}` |
| `()` (группировка) | `\(\)` | `()` | `()` |
| `|` (альтернатива) | не поддерж. | `|` | `|` |
| `\d` (цифра) | нет | нет | `\d` |
| `\w` (слово) | нет | нет | `\w` |
| Lookahead/behind | нет | нет | да |

## Базовые понятия

### Литералы

Обычные символы соответствуют сами себе:

```bash
# Поиск буквального текста
grep 'hello' file.txt    # найдёт "hello" в тексте
```

### Метасимволы

Специальные символы с особым значением:

```
.  ^  $  *  +  ?  {  }  [  ]  \  |  (  )
```

### Экранирование

Чтобы искать метасимвол как обычный символ, нужно экранирование:

```bash
# Поиск точки как символа
grep 'file\.txt' files.txt

# Поиск звёздочки
grep 'rating: \*\*\*' reviews.txt
```

## Простые примеры

### Поиск слова

```bash
# Точное слово
grep 'error' log.txt

# Без учёта регистра
grep -i 'error' log.txt
```

### Поиск в начале/конце строки

```bash
# Строки, начинающиеся с "Error"
grep '^Error' log.txt

# Строки, заканчивающиеся на ".txt"
grep '\.txt$' files.txt
```

### Любой символ

```bash
# Точка = любой символ
grep 'h.t' words.txt  # hat, hit, hot, h@t...

# Несколько любых символов
grep 'c..t' words.txt  # cart, coat, c00t...
```

### Классы символов

```bash
# Один символ из набора
grep '[aeiou]' words.txt  # гласные

# Диапазон
grep '[a-z]' words.txt    # строчные буквы
grep '[0-9]' numbers.txt  # цифры
```

### Повторения

```bash
# * - ноль или более
grep 'go*gle' text.txt   # ggle, gogle, google, gooogle...

# + - один или более (ERE)
grep -E 'go+gle' text.txt  # gogle, google, gooogle...

# ? - ноль или один (ERE)
grep -E 'colou?r' text.txt  # color, colour
```

## Где используются регулярные выражения

### В командной строке

- `grep` - поиск в файлах
- `sed` - потоковый редактор
- `awk` - обработка текста
- `perl` - однострочники
- `find -regex` - поиск файлов

### В языках программирования

- Python: модуль `re`
- JavaScript: объект `RegExp`
- Java: пакет `java.util.regex`
- Go: пакет `regexp`
- PHP: функции `preg_*`

### В редакторах и IDE

- Vim: поиск и замена
- VS Code: поиск с regex
- Sublime Text
- JetBrains IDE

### В других инструментах

- Веб-серверы (nginx, Apache)
- Валидация форм
- Логирование и мониторинг
- Анализ данных

## Преимущества и недостатки

### Преимущества

- **Мощность** - сложный поиск одной строкой
- **Универсальность** - работают везде
- **Компактность** - краткий синтаксис
- **Эффективность** - быстрое выполнение

### Недостатки

- **Сложность чтения** - регулярки write-only
- **Отладка** - сложно отлаживать
- **Производительность** - катастрофический backtracking
- **Ограничения** - не могут разбирать вложенные структуры

## Советы для начинающих

### 1. Начинайте с простого

```bash
# Не сразу писать сложное выражение
# Сначала простой поиск, потом усложнение
grep 'error' log.txt
grep 'Error: [0-9]' log.txt
grep 'Error: [0-9]\{3\}' log.txt
```

### 2. Тестируйте по частям

```bash
# Проверять каждую часть отдельно
echo "test@email.com" | grep '@'
echo "test@email.com" | grep '@[a-z]'
echo "test@email.com" | grep '@[a-z]\+\.'
```

### 3. Используйте онлайн-тестеры

- regex101.com - лучший тестер с объяснениями
- regexr.com
- debuggex.com - визуализация

### 4. Документируйте сложные regex

```python
# Вместо
email_regex = r'^[\w\.-]+@[\w\.-]+\.\w{2,}$'

# Лучше
email_regex = r'''
    ^           # начало строки
    [\w\.-]+    # имя пользователя
    @           # символ @
    [\w\.-]+    # домен
    \.          # точка
    \w{2,}      # TLD (минимум 2 символа)
    $           # конец строки
'''
```

## Быстрый старт с grep

```bash
# Простой поиск
grep 'pattern' file.txt

# Игнорировать регистр
grep -i 'pattern' file.txt

# Расширенные regex
grep -E 'pattern' file.txt

# PCRE
grep -P 'pattern' file.txt

# Показать номера строк
grep -n 'pattern' file.txt

# Только имена файлов
grep -l 'pattern' *.txt

# Инверсия (строки БЕЗ паттерна)
grep -v 'pattern' file.txt
```

## Резюме

Регулярные выражения - это:
- Язык описания шаблонов текста
- Универсальный инструмент (работает везде)
- Мощный, но требует практики
- Три основных типа: BRE, ERE, PCRE

Основные команды для работы:
- `grep` - поиск
- `sed` - замена
- `awk` - обработка
