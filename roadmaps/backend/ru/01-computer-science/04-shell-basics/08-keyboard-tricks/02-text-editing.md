# Редактирование текста (Text Editing)

[prev: 01-cursor-movement](./01-cursor-movement.md) | [next: 03-completion](./03-completion.md)

---
## Удаление текста

### Удаление символов

| Клавиша | Действие |
|---------|----------|
| `Ctrl + D` или `Delete` | Удалить символ под курсором |
| `Backspace` | Удалить символ слева |
| `Ctrl + H` | То же, что Backspace |

### Удаление слов

| Клавиша | Действие |
|---------|----------|
| `Alt + D` | Удалить слово вперёд (до конца слова) |
| `Alt + Backspace` | Удалить слово назад |
| `Ctrl + W` | Удалить слово назад (до пробела) |

```
$ echo Hello Beautiful World
                   ↑ курсор
[Alt+Backspace]
$ echo Hello  World
         ↑ слово "Beautiful" удалено
```

### Удаление до конца/начала строки

| Клавиша | Действие |
|---------|----------|
| `Ctrl + K` | Удалить от курсора до конца строки (Kill) |
| `Ctrl + U` | Удалить от курсора до начала строки |

```
$ echo Hello World
       ↑ курсор
[Ctrl+K]
$ echo H
       ↑ всё после курсора удалено
```

## Kill Ring (буфер обмена Readline)

Удалённый текст сохраняется в **kill ring** — специальном буфере:

| Клавиша | Действие |
|---------|----------|
| `Ctrl + Y` | Вставить последний удалённый текст (Yank) |
| `Alt + Y` | Заменить на предыдущий элемент kill ring |

```
$ echo Hello World
[Ctrl+K]              # удалить строку (в kill ring)
$ rm                  # начать новую команду
[Ctrl+Y]              # вставить удалённый текст
$ rm echo Hello World
```

### Практический пример
```bash
$ echo Hello World
[Ctrl+U]              # удалить всю строку
$ ls                  # другая команда
$ ls
[Ctrl+Y]              # вставить старую команду
$ ls echo Hello World
```

## Трансформация текста

### Изменение регистра

| Клавиша | Действие |
|---------|----------|
| `Alt + U` | Слово в ВЕРХНИЙ регистр (Uppercase) |
| `Alt + L` | Слово в нижний регистр (Lowercase) |
| `Alt + C` | Слово с Заглавной буквы (Capitalize) |

```
$ echo hello world
       ↑ курсор на 'h'
[Alt+U]
$ echo HELLO world
            ↑ курсор переместился
```

### Транспозиция (перестановка)

| Клавиша | Действие |
|---------|----------|
| `Ctrl + T` | Поменять местами два символа перед курсором |
| `Alt + T` | Поменять местами два слова перед курсором |

```
$ ehco Hello         # опечатка
    ↑ курсор после 'c'
[Ctrl+T]
$ echo Hello         # исправлено
```

## Отмена изменений

| Клавиша | Действие |
|---------|----------|
| `Ctrl + _` | Отменить последнее изменение (Undo) |
| `Ctrl + X, Ctrl + U` | То же самое |

Можно нажимать несколько раз для отмены нескольких действий.

## Очистка экрана

| Клавиша | Действие |
|---------|----------|
| `Ctrl + L` | Очистить экран, сохранив текущую строку |

Эквивалент команды `clear`, но быстрее.

## Сводная таблица редактирования

| Клавиша | Действие |
|---------|----------|
| `Ctrl + D` | Удалить символ справа |
| `Backspace` | Удалить символ слева |
| `Ctrl + W` | Удалить слово назад |
| `Alt + D` | Удалить слово вперёд |
| `Ctrl + K` | Удалить до конца строки |
| `Ctrl + U` | Удалить до начала строки |
| `Ctrl + Y` | Вставить из kill ring |
| `Alt + Y` | Следующий элемент kill ring |
| `Ctrl + T` | Поменять символы |
| `Alt + T` | Поменять слова |
| `Alt + U` | Слово в UPPER CASE |
| `Alt + L` | Слово в lower case |
| `Alt + C` | Слово с Заглавной |
| `Ctrl + _` | Отмена |
| `Ctrl + L` | Очистить экран |

## Практические сценарии

### Исправление опечатки в команде
```bash
$ grpe pattern file.txt   # опечатка: grpe → grep
[Ctrl+A]                  # в начало
[Ctrl+T]                  # поменять 'r' и 'e'... не помогло
[Ctrl+_]                  # отмена
[Alt+D]                   # удалить слово
grep                      # ввести правильно
$ grep pattern file.txt
```

### Добавление sudo к команде
```bash
$ apt update
[Ctrl+A]                  # в начало
sudo [Space]              # добавить sudo
$ sudo apt update
```

### Замена команды
```bash
$ cat longfilename.txt
[Ctrl+A]                  # в начало
[Alt+D]                   # удалить "cat"
less                      # ввести "less"
$ less longfilename.txt
```

### Использование kill ring
```bash
$ /very/long/path/to/file.txt
[Ctrl+U]                  # сохранить путь в kill ring
$ cat
[Ctrl+Y]                  # вставить путь
$ cat /very/long/path/to/file.txt
```

## Советы

1. **Ctrl+U и Ctrl+Y** — мощная комбинация для копирования частей команд
2. **Ctrl+W** удаляет до пробела, **Alt+Backspace** — по словам
3. **Ctrl+K** полезен для удаления хвоста команды
4. **Ctrl+L** вместо `clear` — быстрее и сохраняет текущую строку
5. **Ctrl+_** для отмены — можно нажимать многократно

---

[prev: 01-cursor-movement](./01-cursor-movement.md) | [next: 03-completion](./03-completion.md)
