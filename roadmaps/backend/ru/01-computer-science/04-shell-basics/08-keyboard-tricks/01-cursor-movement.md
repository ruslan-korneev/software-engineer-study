# Перемещение курсора (Cursor Movement)

[prev: 06-quoting](../07-shell-expansion/06-quoting.md) | [next: 02-text-editing](./02-text-editing.md)

---
## Readline — основа редактирования

Bash и многие другие программы используют библиотеку **GNU Readline** для редактирования командной строки. Она предоставляет горячие клавиши в стиле Emacs (по умолчанию) или Vi.

## Перемещение по символам

| Клавиша | Действие |
|---------|----------|
| `Ctrl + F` или `→` | На символ вправо (Forward) |
| `Ctrl + B` или `←` | На символ влево (Back) |

```
$ echo Hello World
          ↑ курсор
[Ctrl+B]
$ echo Hello World
         ↑ курсор переместился влево
```

## Перемещение по словам

| Клавиша | Действие |
|---------|----------|
| `Alt + F` или `Ctrl + →` | На слово вперёд |
| `Alt + B` или `Ctrl + ←` | На слово назад |

```
$ echo Hello World
     ↑ курсор
[Alt+F]
$ echo Hello World
           ↑ перепрыгнул слово
```

## Перемещение в начало и конец строки

| Клавиша | Действие |
|---------|----------|
| `Ctrl + A` | В начало строки |
| `Ctrl + E` | В конец строки |
| `Home` | В начало строки |
| `End` | В конец строки |

```
$ echo Hello World
           ↑ курсор
[Ctrl+A]
$ echo Hello World
↑ курсор в начале
```

## Таблица всех перемещений

| Клавиша | Описание |
|---------|----------|
| `Ctrl + A` | В начало строки (Home) |
| `Ctrl + E` | В конец строки (End) |
| `Ctrl + F` | Символ вперёд (→) |
| `Ctrl + B` | Символ назад (←) |
| `Alt + F` | Слово вперёд |
| `Alt + B` | Слово назад |
| `Ctrl + XX` | Переключиться между началом и текущей позицией |

## Практические примеры

### Быстрое исправление в начале команды
```bash
$ ech Hello World    # опечатка в начале
[Ctrl+A]             # в начало
$ ech Hello World
↑
[→][→][→]            # к месту ошибки
$ ech Hello World
   ↑
[o]                  # вставить "o"
$ echo Hello World
```

### Быстрое добавление sudo
```bash
$ apt update         # забыли sudo
[Ctrl+A]             # в начало
$ apt update
↑
sudo [Space]         # добавляем sudo
$ sudo apt update
```

### Редактирование длинной команды
```bash
$ docker run -it --name mycontainer -v /host:/container image:tag
                     ↑ нужно исправить имя
[Ctrl+A]             # в начало
[Alt+F] [Alt+F] ...  # прыгаем по словам до нужного места
```

## Мнемоники для запоминания

- **A** = нАчало (first letter of alphabet)
- **E** = End (конец)
- **F** = Forward (вперёд)
- **B** = Back (назад)

## Режим Vi

Если предпочитаете Vi, можно переключиться:

```bash
$ set -o vi          # включить режим Vi
$ set -o emacs       # вернуться к Emacs
```

В режиме Vi:
- `Esc` — переход в командный режим
- `h`, `l` — влево/вправо
- `w`, `b` — слово вперёд/назад
- `0`, `$` — начало/конец строки
- `i`, `a` — режим вставки

## Проблемы с Alt

На некоторых терминалах Alt не работает. Альтернативы:

```bash
# Вместо Alt+F:
$ Esc, затем F       # последовательное нажатие

# Или настроить терминал на отправку Meta
```

В iTerm2/Terminal.app:
- Настройки → Profiles → Keys → Option key acts as Meta

## Настройка в .inputrc

Можно добавить свои сочетания в `~/.inputrc`:

```
# ~/.inputrc
"\e[1;5C": forward-word    # Ctrl+Right
"\e[1;5D": backward-word   # Ctrl+Left
```

## Советы

1. **Запомните Ctrl+A и Ctrl+E** — используются чаще всего
2. **Alt+B/F** для быстрой навигации по словам
3. **Ctrl+XX** для переключения между началом и текущей позицией
4. **Практикуйтесь** — через неделю движения станут автоматическими

---

[prev: 06-quoting](../07-shell-expansion/06-quoting.md) | [next: 02-text-editing](./02-text-editing.md)
