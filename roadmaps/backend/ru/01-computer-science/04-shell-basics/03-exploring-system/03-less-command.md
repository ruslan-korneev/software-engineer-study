# Команда less

## Что такое less?

**less** — программа для постраничного просмотра текстовых файлов (pager). Название происходит от игры слов: "less is more than more" (less — это больше, чем more, где `more` — более старая программа с аналогичной функцией).

## Зачем нужен less?

Когда файл слишком большой, `cat` выведет всё на экран мгновенно, и вы увидите только конец. `less` позволяет:
- Просматривать файл постранично
- Перемещаться вперёд и назад
- Искать текст
- Просматривать без редактирования

## Синтаксис

```bash
less [опции] файл
```

## Базовое использование

```bash
$ less /var/log/syslog
$ less README.md
$ cat hugefile.txt | less     # вывод другой команды через less
```

## Навигация в less

### Базовое перемещение
| Клавиша | Действие |
|---------|----------|
| `Space` или `f` | Страница вперёд |
| `b` | Страница назад |
| `Enter` или `j` | Строка вниз |
| `k` | Строка вверх |
| `d` | Полстраницы вниз |
| `u` | Полстраницы вверх |

### Переход в начало и конец
| Клавиша | Действие |
|---------|----------|
| `g` или `Home` | В начало файла |
| `G` или `End` | В конец файла |
| `50g` или `50G` | К строке 50 |
| `50%` | К 50% файла |

### Поиск
| Клавиша | Действие |
|---------|----------|
| `/pattern` | Поиск вперёд |
| `?pattern` | Поиск назад |
| `n` | Следующее совпадение |
| `N` | Предыдущее совпадение |

### Выход
| Клавиша | Действие |
|---------|----------|
| `q` | Выход |
| `h` | Справка |

## Примеры поиска

```bash
$ less /var/log/syslog

# Внутри less:
/error          # найти слово "error"
n               # следующее совпадение
N               # предыдущее совпадение
?warning        # искать "warning" назад
```

## Полезные опции

### -N — номера строк
```bash
$ less -N file.txt
     1  First line
     2  Second line
     3  Third line
```

### -S — не переносить длинные строки
```bash
$ less -S wide_file.csv
```
Длинные строки обрезаются, можно прокручивать горизонтально стрелками.

### -i — регистронезависимый поиск
```bash
$ less -i file.txt
# /ERROR найдёт и "error", и "ERROR", и "Error"
```

### -F — автовыход для коротких файлов
```bash
$ less -F short.txt
# Если файл умещается на экран, less сразу выйдет
```

### -X — не очищать экран при выходе
```bash
$ less -X file.txt
# Содержимое останется на экране после выхода
```

### +G — начать с конца файла
```bash
$ less +G /var/log/syslog
# Сразу переходит в конец — удобно для логов
```

### +/pattern — начать с поиска
```bash
$ less +/error /var/log/syslog
# Сразу переходит к первому вхождению "error"
```

## Просмотр нескольких файлов

```bash
$ less file1.txt file2.txt file3.txt
```

Навигация между файлами:
| Клавиша | Действие |
|---------|----------|
| `:n` | Следующий файл |
| `:p` | Предыдущий файл |
| `:e filename` | Открыть другой файл |

## Использование с другими командами

### Просмотр вывода команды
```bash
$ ps aux | less                    # список процессов
$ history | less                   # история команд
$ dmesg | less                     # системные сообщения
```

### Просмотр логов
```bash
$ less /var/log/syslog
$ less +F /var/log/syslog          # следить за обновлениями (как tail -f)
```

Режим follow (Ctrl+C для выхода, Shift+F для возврата):
```bash
$ less +F /var/log/syslog
# или внутри less нажать Shift+F
```

## less vs cat vs more

| Команда | Назначение |
|---------|------------|
| `cat` | Вывести весь файл сразу |
| `more` | Простой постраничный просмотр (только вперёд) |
| `less` | Продвинутый просмотр (вперёд, назад, поиск) |

## Советы

1. Запомните: `/` для поиска, `n` и `N` для навигации по результатам
2. `q` — выход (как почти везде в терминале)
3. `less -N` для просмотра кода — удобно видеть номера строк
4. `less +F` для логов — комбинация `less` и `tail -f`
5. Используйте `less` вместо `cat` для больших файлов
