# How Networks Work

## Что такое компьютерная сеть?

**Компьютерная сеть** — это группа устройств (компьютеров, серверов, смартфонов, принтеров и т.д.), соединённых между собой для обмена данными и совместного использования ресурсов.

Основные задачи сетей:
- Обмен файлами и данными
- Совместный доступ к ресурсам (принтеры, хранилища)
- Коммуникация (почта, мессенджеры, видеозвонки)
- Централизованное управление и мониторинг

---

## Типы сетей по масштабу

### PAN (Personal Area Network)
Персональная сеть — самая маленькая сеть вокруг одного человека.

**Примеры:**
- Bluetooth-соединение телефона с наушниками
- Соединение ноутбука с мышкой/клавиатурой
- Радиус: до 10 метров

### LAN (Local Area Network)
Локальная сеть — соединяет устройства в пределах одного здания или небольшой территории.

**Характеристики:**
- Радиус: до нескольких километров
- Высокая скорость (до 10 Гбит/с и выше)
- Низкая задержка
- Обычно принадлежит одной организации

**Примеры:**
- Домашняя сеть (роутер + компьютеры + телефоны)
- Офисная сеть компании
- Компьютерный класс в университете

### MAN (Metropolitan Area Network)
Городская сеть — объединяет несколько LAN в пределах города.

**Примеры:**
- Сеть университетских кампусов
- Сеть городских библиотек
- Корпоративная сеть с несколькими офисами в городе

### WAN (Wide Area Network)
Глобальная сеть — охватывает большие географические территории.

**Характеристики:**
- Радиус: страны, континенты, весь мир
- Скорость ниже, чем в LAN
- Более высокая задержка
- Обычно использует арендованные каналы связи

**Примеры:**
- Интернет — крупнейшая WAN
- Корпоративные сети международных компаний
- Банковские сети

```
┌─────────────────────────────────────────────────────────────┐
│                         WAN (Интернет)                       │
│  ┌─────────────────┐              ┌─────────────────┐       │
│  │   MAN (Город A) │              │   MAN (Город B) │       │
│  │  ┌─────┐ ┌─────┐│              │┌─────┐ ┌─────┐  │       │
│  │  │ LAN │ │ LAN ││              ││ LAN │ │ LAN │  │       │
│  │  │Офис1│ │Офис2││◄────────────►││Офис3│ │Офис4│  │       │
│  │  └─────┘ └─────┘│              │└─────┘ └─────┘  │       │
│  └─────────────────┘              └─────────────────┘       │
└─────────────────────────────────────────────────────────────┘
```

---

## Топологии сетей

**Топология** — это физическая или логическая структура соединения устройств в сети.

### Шина (Bus)

```
 ═══════════════════════════════════════
    │        │        │        │
  ┌─┴─┐    ┌─┴─┐    ┌─┴─┐    ┌─┴─┐
  │PC1│    │PC2│    │PC3│    │PC4│
  └───┘    └───┘    └───┘    └───┘
```

**Плюсы:** простота, дешевизна
**Минусы:** при обрыве кабеля — вся сеть не работает, коллизии при передаче

### Звезда (Star)

```
        ┌─────┐
        │ PC1 │
        └──┬──┘
           │
     ┌─────┴─────┐
     │   Switch  │
     └─┬───┬───┬─┘
       │   │   │
    ┌──┴┐ ┌┴──┐ ┌┴──┐
    │PC2│ │PC3│ │PC4│
    └───┘ └───┘ └───┘
```

**Плюсы:** выход одного узла не влияет на другие, легко добавлять устройства
**Минусы:** зависимость от центрального узла (switch/hub)

**Это самая распространённая топология в современных LAN!**

### Кольцо (Ring)

```
      ┌───┐
      │PC1│
      └─┬─┘
    ┌───┘ └───┐
  ┌─┴─┐     ┌─┴─┐
  │PC4│     │PC2│
  └─┬─┘     └─┬─┘
    └───┐ ┌───┘
      ┌─┴─┐
      │PC3│
      └───┘
```

**Плюсы:** нет коллизий, предсказуемое время доставки
**Минусы:** обрыв в одном месте может нарушить всю сеть

### Полносвязная (Mesh)

```
    ┌───┐─────────────┌───┐
    │PC1│─────┐ ┌─────│PC2│
    └─┬─┘     │ │     └─┬─┘
      │     ┌─┴─┴─┐     │
      │     │ PC5 │     │
      │     └─┬─┬─┘     │
    ┌─┴─┐     │ │     ┌─┴─┐
    │PC4│─────┘ └─────│PC3│
    └───┘─────────────└───┘
```

**Плюсы:** максимальная отказоустойчивость, много путей доставки
**Минусы:** очень дорого, сложно масштабировать

---

## Сетевое оборудование

### Сетевая карта (NIC - Network Interface Card)
Устройство, позволяющее компьютеру подключаться к сети. Каждая сетевая карта имеет уникальный **MAC-адрес**.

```
MAC-адрес: 00:1A:2B:3C:4D:5E
           └─────┘ └─────┘
           Производитель  Уникальный ID
```

### Концентратор (Hub)
Простейшее устройство — получает сигнал и отправляет его на **все** порты. Устаревшее оборудование.

### Коммутатор (Switch)
Умное устройство — отправляет данные только на нужный порт, используя таблицу MAC-адресов.

```
Таблица коммутации:
┌────────────────┬──────┐
│   MAC-адрес    │ Порт │
├────────────────┼──────┤
│ 00:1A:2B:3C:4D:5E │  1   │
│ 00:1A:2B:3C:4D:5F │  2   │
│ 00:1A:2B:3C:4D:60 │  3   │
└────────────────┴──────┘
```

### Маршрутизатор (Router)
Соединяет разные сети и выбирает оптимальный путь для передачи данных. Работает с IP-адресами.

```
         Интернет
            │
       ┌────┴────┐
       │  Router │  ← NAT, DHCP, Firewall
       └────┬────┘
            │
       ┌────┴────┐
       │  Switch │
       └─┬──┬──┬─┘
         │  │  │
       PC1 PC2 PC3
```

### Точка доступа (Access Point)
Обеспечивает беспроводное (Wi-Fi) подключение устройств к проводной сети.

### Модем
Преобразует цифровой сигнал в аналоговый и обратно (для DSL, кабельных линий).

---

## Сетевые модели

### Модель OSI (Open Systems Interconnection)

Эталонная модель из 7 уровней. Помогает понять, как данные проходят от приложения до физического канала.

```
┌─────────────────────────────────────────────────────────────┐
│  №  │      Уровень       │   Протоколы    │  PDU (данные)  │
├─────┼────────────────────┼────────────────┼────────────────┤
│  7  │ Application        │ HTTP, FTP,     │     Данные     │
│     │ (Прикладной)       │ SMTP, DNS      │                │
├─────┼────────────────────┼────────────────┼────────────────┤
│  6  │ Presentation       │ SSL/TLS,       │     Данные     │
│     │ (Представления)    │ JPEG, ASCII    │                │
├─────┼────────────────────┼────────────────┼────────────────┤
│  5  │ Session            │ NetBIOS, RPC   │     Данные     │
│     │ (Сеансовый)        │                │                │
├─────┼────────────────────┼────────────────┼────────────────┤
│  4  │ Transport          │ TCP, UDP       │    Сегмент     │
│     │ (Транспортный)     │                │                │
├─────┼────────────────────┼────────────────┼────────────────┤
│  3  │ Network            │ IP, ICMP,      │     Пакет      │
│     │ (Сетевой)          │ ARP            │                │
├─────┼────────────────────┼────────────────┼────────────────┤
│  2  │ Data Link          │ Ethernet,      │     Кадр       │
│     │ (Канальный)        │ Wi-Fi, PPP     │   (Frame)      │
├─────┼────────────────────┼────────────────┼────────────────┤
│  1  │ Physical           │ Кабели,        │     Биты       │
│     │ (Физический)       │ разъёмы        │                │
└─────────────────────────────────────────────────────────────┘
```

**Мнемоника для запоминания (снизу вверх):**
"Please Do Not Throw Sausage Pizza Away"
(Physical, Data Link, Network, Transport, Session, Presentation, Application)

### Модель TCP/IP

Практическая модель, используемая в реальных сетях. Состоит из 4 уровней.

```
┌───────────────────┬─────────────────────────────────────────┐
│    TCP/IP         │              OSI                        │
├───────────────────┼─────────────────────────────────────────┤
│  Application      │  Application + Presentation + Session  │
│  (HTTP, FTP, DNS) │                                         │
├───────────────────┼─────────────────────────────────────────┤
│  Transport        │  Transport                              │
│  (TCP, UDP)       │                                         │
├───────────────────┼─────────────────────────────────────────┤
│  Internet         │  Network                                │
│  (IP, ICMP)       │                                         │
├───────────────────┼─────────────────────────────────────────┤
│  Network Access   │  Data Link + Physical                   │
│  (Ethernet, Wi-Fi)│                                         │
└───────────────────┴─────────────────────────────────────────┘
```

### Инкапсуляция данных

При передаче данные "оборачиваются" заголовками каждого уровня:

```
Отправка (сверху вниз):
┌─────────────────────────────────────────────────────────────┐
│ Application:  [Данные]                                      │
│ Transport:    [TCP Header][Данные]          → Сегмент       │
│ Network:      [IP Header][TCP][Данные]      → Пакет         │
│ Data Link:    [Frame][IP][TCP][Данные][FCS] → Кадр          │
│ Physical:     01101001110010110101...       → Биты          │
└─────────────────────────────────────────────────────────────┘

Приём (снизу вверх) — обратный процесс (декапсуляция)
```

---

## Практический пример: отправка запроса на веб-сайт

```
1. Вы вводите в браузере: http://example.com

2. Application (L7): Браузер формирует HTTP-запрос
   GET / HTTP/1.1
   Host: example.com

3. Transport (L4): TCP разбивает данные на сегменты, добавляет порты
   Source Port: 54321, Dest Port: 80

4. Network (L3): IP добавляет адреса
   Source IP: 192.168.1.100, Dest IP: 93.184.216.34

5. Data Link (L2): Ethernet добавляет MAC-адреса
   Source MAC: AA:BB:CC:DD:EE:FF, Dest MAC: 11:22:33:44:55:66

6. Physical (L1): Биты передаются по кабелю/Wi-Fi

7. На сервере — обратный процесс (декапсуляция)
```

---

## Проверка сети в командной строке

```bash
# Проверить доступность хоста
ping google.com

# Показать маршрут до хоста
traceroute google.com  # Linux/macOS
tracert google.com     # Windows

# Показать сетевые интерфейсы
ip addr                # Linux
ifconfig               # macOS/старый Linux
ipconfig               # Windows

# Показать таблицу маршрутизации
ip route               # Linux
netstat -rn            # macOS/Windows

# Показать активные соединения
netstat -an
ss -tuln               # Linux (современный)
```

---

## Ключевые термины

| Термин | Описание |
|--------|----------|
| **Узел (Node)** | Любое устройство в сети |
| **Хост (Host)** | Устройство с IP-адресом |
| **Пакет (Packet)** | Единица данных на сетевом уровне |
| **Кадр (Frame)** | Единица данных на канальном уровне |
| **Пропускная способность** | Максимальная скорость передачи (Мбит/с, Гбит/с) |
| **Задержка (Latency)** | Время прохождения пакета от A до B |
| **Jitter** | Вариация задержки |
| **Throughput** | Реальная скорость передачи данных |
