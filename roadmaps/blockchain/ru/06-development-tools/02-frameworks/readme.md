# Фреймворки разработки смарт-контрактов

## Введение

Фреймворки разработки смарт-контрактов предоставляют инструменты для компиляции, тестирования, деплоя и отладки смарт-контрактов. Выбор правильного фреймворка существенно влияет на продуктивность разработки и качество кода.

## Обзор фреймворков

### Hardhat

**Hardhat** - наиболее популярный JavaScript/TypeScript фреймворк для разработки Ethereum приложений.

**Ключевые особенности:**
- Тесты на JavaScript/TypeScript (Mocha + Chai)
- Богатая экосистема плагинов
- Hardhat Network с форком mainnet
- Console.log в Solidity
- Отличная документация

**Когда использовать:**
- Команда знакома с JavaScript/TypeScript
- Нужна большая экосистема плагинов
- Требуется интеграция с фронтендом

### Foundry

**Foundry** - быстрый фреймворк на Rust с тестами на Solidity.

**Ключевые особенности:**
- Молниеносная скорость компиляции и тестов
- Тесты на Solidity (единый язык)
- Встроенный fuzzing и invariant testing
- Мощные CLI инструменты (forge, cast, anvil, chisel)
- Минимум конфигурации

**Когда использовать:**
- Нужна максимальная скорость
- Предпочтение Solidity для тестов
- Требуется серьезное fuzz тестирование

### Truffle

**Truffle** - исторически первый популярный фреймворк (deprecated).

**Ключевые особенности:**
- Тесты на JavaScript
- Система миграций для деплоя
- Ganache для локальной разработки
- Большое количество обучающих материалов

**Статус:** Прекращена активная разработка с 2023 года. Не рекомендуется для новых проектов.

### Brownie

**Brownie** - Python-based фреймворк, популярный в DeFi.

**Ключевые особенности:**
- Тесты на Python (pytest)
- Интерактивная IPython консоль
- Хорошая интеграция с mainnet fork
- brownie-mix шаблоны

**Статус:** Находится в режиме поддержки. Рассмотрите Ape Framework как альтернативу.

## Сравнительная таблица

| Характеристика | Hardhat | Foundry | Truffle | Brownie |
|----------------|---------|---------|---------|---------|
| **Язык тестов** | JS/TS | Solidity | JS | Python |
| **Скорость** | Средняя | Очень быстрая | Медленная | Средняя |
| **Fuzzing** | Плагин | Встроенный | Нет | Нет |
| **Форк mainnet** | Да | Да | Да | Да |
| **Плагины** | Много | Мало | Много | Мало |
| **Документация** | Отличная | Хорошая | Хорошая | Хорошая |
| **Сообщество** | Большое | Растущее | Угасающее | Небольшое |
| **Активность** | Высокая | Высокая | Прекращена | Низкая |
| **TypeScript** | Нативно | Нет | Частично | Нет |
| **Кривая обучения** | Средняя | Легкая* | Средняя | Легкая* |

\* Легкая для тех, кто знает соответствующий язык (Solidity/Python)

## Детальное сравнение

### Скорость компиляции и тестов

```
Foundry >>> Hardhat > Brownie > Truffle
```

Foundry написан на Rust и оптимизирован для скорости. Типичные проекты компилируются за секунды, тесты выполняются в десятки раз быстрее JavaScript-based альтернатив.

### Качество тестирования

| Аспект | Hardhat | Foundry |
|--------|---------|---------|
| Unit тесты | Отлично | Отлично |
| Fuzz тесты | Требует настройки | Встроено |
| Invariant тесты | Сложно | Встроено |
| Coverage | Плагин | Встроено |
| Gas reporting | Плагин | Встроено |

### Экосистема и интеграции

**Hardhat** имеет преимущество в экосистеме:
- hardhat-deploy - продвинутый деплой
- hardhat-verify - верификация контрактов
- hardhat-gas-reporter - отчеты о газе
- typechain - TypeScript типы
- И сотни других плагинов

**Foundry** растет, но плагинов меньше:
- forge-std - стандартная библиотека
- solmate - оптимизированные контракты
- PRBMath - математика с фиксированной точкой

### Кривая обучения

**Для JavaScript разработчиков:** Hardhat > Truffle > Foundry > Brownie

**Для Solidity разработчиков:** Foundry > Hardhat > Truffle > Brownie

**Для Python разработчиков:** Brownie > Hardhat > Foundry > Truffle

## Рекомендации по выбору

### Выбирайте Hardhat, если:

1. Команда хорошо знает JavaScript/TypeScript
2. Нужна широкая экосистема плагинов
3. Проект требует интеграции с веб-фронтендом
4. Важна совместимость с существующими инструментами
5. Нужна отличная документация и поддержка сообщества

```bash
# Быстрый старт с Hardhat
mkdir my-project && cd my-project
npm init -y
npm install --save-dev hardhat
npx hardhat init
```

### Выбирайте Foundry, если:

1. Скорость разработки критически важна
2. Предпочитаете писать тесты на Solidity
3. Нужно серьезное fuzz/invariant тестирование
4. Работаете над security-critical проектом
5. Хотите минимум конфигурации

```bash
# Быстрый старт с Foundry
curl -L https://foundry.paradigm.xyz | bash
foundryup
forge init my-project
cd my-project
```

### Выбирайте комбинацию Hardhat + Foundry, если:

1. Хотите лучшее от обоих миров
2. Hardhat для деплоя и скриптов
3. Foundry для тестирования
4. Проект достаточно большой, чтобы оправдать сложность

### Не выбирайте Truffle для новых проектов

Truffle официально прекращен. Используйте его только для:
- Поддержки существующих проектов
- Понимания legacy кодовых баз
- Миграции на Hardhat/Foundry

### Brownie - только если Python критичен

Brownie подходит, если:
- Команда состоит из Python разработчиков
- Уже есть Python инфраструктура
- Готовы к ограниченной поддержке

Рассмотрите **Ape Framework** как более активную альтернативу.

## Миграция между фреймворками

### Truffle -> Hardhat

1. Скопируйте контракты в `contracts/`
2. Конвертируйте миграции в скрипты
3. Перепишите тесты (синтаксис похож)
4. Настройте hardhat.config.js

### Hardhat -> Foundry

1. Скопируйте контракты в `src/`
2. Перепишите тесты на Solidity
3. Конвертируйте скрипты деплоя
4. Настройте foundry.toml

### Brownie -> Ape Framework

1. Синтаксис очень похож
2. Обновите импорты
3. Проверьте совместимость плагинов

## Типичный workflow разработки

Независимо от выбранного фреймворка, workflow обычно включает:

```
1. Инициализация проекта
2. Написание контрактов
3. Компиляция
4. Написание тестов
5. Запуск тестов локально
6. Деплой на testnet
7. Верификация на Etherscan
8. Тестирование на testnet
9. Аудит (для production)
10. Деплой на mainnet
```

## Заключение

**Для большинства новых проектов рекомендуется:**

1. **Hardhat** - если команда знает JavaScript и нужна богатая экосистема
2. **Foundry** - если важна скорость и качество тестирования

Оба фреймворка активно развиваются, имеют отличную документацию и большое сообщество. Выбор зависит от предпочтений команды и требований проекта.

## Содержание раздела

- [Hardhat](./01-hardhat/readme.md) - JavaScript/TypeScript фреймворк
- [Foundry](./02-foundry/readme.md) - Rust-based фреймворк с Solidity тестами
- [Truffle](./03-truffle/readme.md) - Legacy фреймворк (deprecated)
- [Brownie](./04-brownie/readme.md) - Python фреймворк (maintenance mode)

## Ресурсы

- [Hardhat Documentation](https://hardhat.org/docs)
- [Foundry Book](https://book.getfoundry.sh/)
- [Ape Framework](https://apeworx.io/) - альтернатива Brownie
- [Ethereum Development Tools](https://ethereum.org/developers/docs/development-frameworks/)
